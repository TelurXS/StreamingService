@page "/test"
@layout ProfileLayout

@using Domain.Entities

@inject IIdentityService IdentityService
@inject ITitleService TitleService

<RequireSubscription Subscription="Subscription.Trial" />

@code {
	private User User { get; set; } = default!;

	private List<Title> Titles { get; set; } = default!;

	protected override async Task OnInitializedAsync()
	{
		var userResult = await IdentityService.GetProfileAsync();

		if (userResult.IsFound)
		{
			User = userResult.AsFound;
		}

		var titlesResult = await TitleService.FindAllPopularAsync();

		if (titlesResult.IsFound)
		{
			Titles = titlesResult.AsFound;
		}
	}
}
